<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="it" xml:lang="it"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.3.450">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>Northern Apulia Coastal Landscape - Cronologia</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
</style>


<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "language": {
    "search-no-results-text": "Nessun risultato",
    "search-matching-documents-text": "documenti trovati",
    "search-copy-link-title": "Copiare il link nella ricerca",
    "search-hide-matches-text": "Nascondere i risultati aggiuntivi",
    "search-more-match-text": "ci sono altri risultati in questo documento",
    "search-more-matches-text": "ulteriori risultati in questo documento",
    "search-clear-button-title": "Pulire",
    "search-detached-cancel-button-title": "Cancellare",
    "search-submit-button-title": "Inviare",
    "search-label": "Ricerca"
  }
}</script>

<script src="site_libs/kePrint-0.0.1/kePrint.js"></script>
<link href="site_libs/lightable-0.0.1/lightable.css" rel="stylesheet">


<link rel="stylesheet" href="styles.css">
</head>

<body class="nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg navbar-dark ">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container">
    <a href="./index.html" class="navbar-brand navbar-brand-logo">
    <img src="./images/logo.png" alt="" class="navbar-logo">
    </a>
    <a class="navbar-brand" href="./index.html">
    <span class="navbar-title">Northern Apulia Coastal Landscape</span>
    </a>
  </div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Attiva/disattiva la navigazione" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item">
    <a class="nav-link" href="./index.html" rel="" target="">
 <span class="menu-text">Home</span></a>
  </li>  
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-schede" role="button" data-bs-toggle="dropdown" aria-expanded="false" rel="" target="">
 <span class="menu-text">Schede</span>
    </a>
    <ul class="dropdown-menu" aria-labelledby="nav-menu-schede">    
        <li>
    <a class="dropdown-item" href="./fields.html" rel="" target="">
 <span class="dropdown-text">Schede di campi (UR)</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./ut.html" rel="" target="">
 <span class="dropdown-text">Schede di unità topografiche (UT)</span></a>
  </li>  
    </ul>
  </li>
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-risultati" role="button" data-bs-toggle="dropdown" aria-expanded="false" rel="" target="">
 <span class="menu-text">Risultati</span>
    </a>
    <ul class="dropdown-menu" aria-labelledby="nav-menu-risultati">    
        <li>
    <a class="dropdown-item" href="./chronology.html" rel="" target="">
 <span class="dropdown-text">Cronologia</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./mascherone.html" rel="" target="">
 <span class="dropdown-text">Villa Mascherone</span></a>
  </li>  
    </ul>
  </li>
  <li class="nav-item">
    <a class="nav-link" href="./progress.html" rel="" target="">
 <span class="menu-text">Avanzamento</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="./bibliography.html" rel="" target="">
 <span class="menu-text">Bibliografia</span></a>
  </li>  
</ul>
            <div class="quarto-navbar-tools ms-auto">
</div>
          </div> <!-- /navcollapse -->
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">In questa pagina</h2>
   
  <ul>
  <li><a href="#informazioni-supplementari" id="toc-informazioni-supplementari" class="nav-link active" data-scroll-target="#informazioni-supplementari">Informazioni supplementari</a>
  <ul class="collapse">
  <li><a href="#macroclassi-cronotipologiche" id="toc-macroclassi-cronotipologiche" class="nav-link" data-scroll-target="#macroclassi-cronotipologiche">Macroclassi cronotipologiche</a></li>
  </ul></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Cronologia</h1>
</div>



<div class="quarto-title-meta">

    
    <div>
    <div class="quarto-title-meta-heading">Data di Pubblicazione</div>
    <div class="quarto-title-meta-contents">
      <p class="date">13 marzo 2025</p>
    </div>
  </div>
  
    
  </div>
  

</header>

<div class="cell">
<style type="text/css">
p {
  text-align: justify
}

</style>
</div>
<p>La datazione derivante dalle tipocronologie ceramiche è tipicamente espressa in forma di intervalli di tempo, riflettendo l’incertezza intrinseca nella classificazione cronologica. Ogni frammento ceramico è quindi associato a un intervallo specifico, che può essere più o meno ampio a seconda della precisione della tipocronologia o di eventuali contesti stratigrafici. L’approccio aoristico utilizza questi intervalli senza forzare una data specifica: invece di scegliere un punto centrale arbitrario, distribuisce uniformemente la presenza di ciascun reperto lungo tutto il suo intervallo di datazione. Questo metodo consente di analizzare materiali con datazioni diverse in maniera coerente, evidenziando quali periodi sono più frequentemente coperti dagli intervalli di datazione.</p>
<p>È fondamentale distinguere tra frequenze e probabilità di occupazione o esistenza. La somma aoristica non rappresenta la reale cronologia di occupazione di un sito, ma mostra semplicemente quanti reperti, in base alle loro date assegnate, potrebbero esistere in un dato periodo, senza fornire una misura diretta dell’intensità o continuità dell’occupazione. In altre parole, non è una stima della probabilità che il sito fosse effettivamente occupato in un dato momento, ma solo un conteggio ponderato dei possibili intervalli di esistenza dei reperti. Questo significa che un picco nella somma aoristica non indica necessariamente un’intensificazione dell’occupazione, ma potrebbe riflettere solo la maggiore durata delle tipologie ceramiche associate a quel periodo o una migliore documentazione archeologica.</p>
<p>Per superare alcune di queste limitazioni, abbiamo utilizzato i modelli ICAR (Intrinsically Conditional Autoregressive), che incorporano il concetto di autocorrelazione temporale. Analogamente all’autocorrelazione spaziale espressa dalla prima legge della geografia di Waldo Tobler (“Ogni cosa è legata a ogni altra, ma le cose vicine sono più legate di quelle lontane”), i modelli ICAR assumono che periodi vicini nel tempo siano probabilmente simili in termini di occupazione. Così come per la somma aoristica, anche l’ICAR non produce una cronologia diretta di occupazione, ma un modello statistico che regolarizza le frequenze aoristiche, riducendo la frammentazione artificiale dei dati e producendo una stima più continua della distribuzione dei reperti nel tempo.</p>
<p>Il grafico ICAR riportato di seguito incorpora questo principio di continuità temporale. La stima media a posteriori (posterior mean), rappresentata dai punti neri, è la media delle distribuzioni posteriori per ciascun intervallo temporale, calcolata integrando i dati osservati con le assunzioni del modello. Le fasce colorate (50% HPDI in blu scuro e 90% HPDI in blu chiaro) rappresentano gli intervalli di credibilità, fornendo una misura dell’incertezza associata a ciascuna stima. Questo approccio non solo smussa le fluttuazioni casuali nei dati, ma fornisce stime più robuste, soprattutto nei periodi in cui le osservazioni sono scarse. Quando i dati sono limitati, il modello ICAR “prende in prestito” informazioni dai periodi adiacenti, producendo una ricostruzione cronologica più coerente e interpretabile.</p>
<p>Rispetto alla somma aoristica, i modelli ICAR offrono due vantaggi principali: permettono di evidenziare processi continui e riducono l’impatto di anomalie o lacune nei dati. Grazie alla modellazione bayesiana, l’inclusione dell’incertezza fornisce non solo le tendenze principali, ma anche una misura chiara dell’affidabilità delle stime.</p>
<p>Entrambi i metodi operano sui dati a disposizione, che sono una rappresentazione indiretta dell’occupazione basata sulla tipocronologia ceramica. Per ottenere una vera ricostruzione della cronologia di occupazione, sarebbe necessario integrare questi risultati con altri tipi di dati, come scavi (e quindi stratigrafie), datazioni assolute o indicatori funzionali della presenza umana.</p>
<div class="tabset-margin-container"></div><div class="panel-tabset">
<ul class="nav nav-tabs" role="tablist"><li class="nav-item" role="presentation"><a class="nav-link active" id="tabset-1-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-1-1" role="tab" aria-controls="tabset-1-1" aria-selected="true">Aoristic</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-1-2-tab" data-bs-toggle="tab" data-bs-target="#tabset-1-2" role="tab" aria-controls="tabset-1-2" aria-selected="false">ICAR</a></li></ul>
<div class="tab-content">
<div id="tabset-1-1" class="tab-pane active" role="tabpanel" aria-labelledby="tabset-1-1-tab">
<div class="cell">
<div class="cell-output-display">
<div id="fig-aoristic-General-NACS-Reduced" class="quarto-figure quarto-figure-center anchored">
<figure class="figure">
<p><img src="chronology_files/figure-html/fig-aoristic-General-NACS-Reduced-1.png" class="img-fluid figure-img" width="672"></p>
<figcaption class="figure-caption">Figura&nbsp;1: Somma aoristica dei materiali rinvenuti durante le ricognizioni del 2024, datati in base a macroclassi cronotipologiche. Inquadramento cronologico dei materiali archeologici dal dataset pulito da rumore di fondo (ceramica acroma, ceramica da fuoco, laterizi, ceramica non identificata). Al momento, il sito di Mascherone è escluso perché le analisi sul campo hanno adottato una metodologia differente.</figcaption>
</figure>
</div>
</div>
</div>
</div>
<div id="tabset-1-2" class="tab-pane" role="tabpanel" aria-labelledby="tabset-1-2-tab">
<div class="cell">
<div class="cell-output-display">
<div id="fig-ICAR-General-NACS-Reduced" class="quarto-figure quarto-figure-center anchored">
<figure class="figure">
<p><img src="chronology_files/figure-html/fig-ICAR-General-NACS-Reduced-1.png" class="img-fluid figure-img" width="672"></p>
<figcaption class="figure-caption">Figura&nbsp;2: Modello ICAR sul dataset pulito dal rumore di fondo (ceramica acroma, ceramica da fuoco, laterizi, ceramica non identificata) con parametri [niter=2000000, nburnin=25000, thin=50, nchains=4, sigmaPrior=dexp(rate=100)], ristretta al range 5000 a.C. - 1900 d.C. Al momento, il sito di Mascherone è escluso perché le analisi sul campo hanno adottato una metodologia differente.</figcaption>
</figure>
</div>
</div>
</div>
</div>
</div>
</div>
<section id="informazioni-supplementari" class="level2">
<h2 class="anchored" data-anchor-id="informazioni-supplementari">Informazioni supplementari</h2>
<section id="macroclassi-cronotipologiche" class="level3">
<h3 class="anchored" data-anchor-id="macroclassi-cronotipologiche">Macroclassi cronotipologiche</h3>
<div class="cell">
<div class="cell-output-display">
<div id="tbl-datazione-macrocatgorie" class="anchored">
<table class="lightable-minimal table table-sm table-striped small" data-quarto-postprocess="true">
<caption>Tabella&nbsp;1: Datazione proposta per le macroclassi di materiali archeologici rinvenuti durante le indagini di ricognizione di superficie. I valori sono in anni per necessità computazionali, e sono espressi in negativo per le datazioni a.C. e in positivo per le datazioni d.C.</caption>
<colgroup>
<col style="width: 33%">
<col style="width: 33%">
<col style="width: 33%">
</colgroup>
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th" style="text-align: left; empty-cells: hide; border-bottom: hidden;"></th>
<th colspan="2" data-quarto-table-cell-role="th" style="text-align: center; border-bottom: hidden; padding-bottom: 0; padding-left: 3px; padding-right: 3px;"><div style="border-bottom: 1px solid #ddd; padding-bottom: 5px; ">
Cronologia
</div></th>
</tr>
<tr class="odd">
<th style="text-align: left;" data-quarto-table-cell-role="th">Materiale</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">Datazione_da</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">Datazione_a</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">laterizi</td>
<td style="text-align: right;">-399</td>
<td style="text-align: right;">1599</td>
</tr>
<tr class="even">
<td style="text-align: left;">tegole_piane_romane</td>
<td style="text-align: right;">-300</td>
<td style="text-align: right;">699</td>
</tr>
<tr class="odd">
<td style="text-align: left;">tegola_pettinata</td>
<td style="text-align: right;">300</td>
<td style="text-align: right;">699</td>
</tr>
<tr class="even">
<td style="text-align: left;">macine</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
</tr>
<tr class="odd">
<td style="text-align: left;">scorie_metalliche</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
</tr>
<tr class="even">
<td style="text-align: left;">ceramica_acroma</td>
<td style="text-align: right;">-399</td>
<td style="text-align: right;">1799</td>
</tr>
<tr class="odd">
<td style="text-align: left;">ceramica_acroma_medievale</td>
<td style="text-align: right;">1200</td>
<td style="text-align: right;">1599</td>
</tr>
<tr class="even">
<td style="text-align: left;">ceramica_protomaiolica</td>
<td style="text-align: right;">1200</td>
<td style="text-align: right;">1399</td>
</tr>
<tr class="odd">
<td style="text-align: left;">ceramica_dipinta</td>
<td style="text-align: right;">-399</td>
<td style="text-align: right;">1399</td>
</tr>
<tr class="even">
<td style="text-align: left;">ceramica_RMR</td>
<td style="text-align: right;">1200</td>
<td style="text-align: right;">1399</td>
</tr>
<tr class="odd">
<td style="text-align: left;">ceramica_vernice_rossa_interna</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">199</td>
</tr>
<tr class="even">
<td style="text-align: left;">ceramica_smaltata</td>
<td style="text-align: right;">1400</td>
<td style="text-align: right;">1899</td>
</tr>
<tr class="odd">
<td style="text-align: left;">ceramica_invetriata</td>
<td style="text-align: right;">1200</td>
<td style="text-align: right;">1899</td>
</tr>
<tr class="even">
<td style="text-align: left;">ceramica_invetriata_verde</td>
<td style="text-align: right;">1201</td>
<td style="text-align: right;">1399</td>
</tr>
<tr class="odd">
<td style="text-align: left;">ceramica_doppio_bagno</td>
<td style="text-align: right;">1300</td>
<td style="text-align: right;">1499</td>
</tr>
<tr class="even">
<td style="text-align: left;">ceramica_vetrina_pesante</td>
<td style="text-align: right;">1000</td>
<td style="text-align: right;">1099</td>
</tr>
<tr class="odd">
<td style="text-align: left;">ceramica_invetriata_graffita</td>
<td style="text-align: right;">1500</td>
<td style="text-align: right;">1899</td>
</tr>
<tr class="even">
<td style="text-align: left;">ceramica_graffita_bizantina</td>
<td style="text-align: right;">1100</td>
<td style="text-align: right;">1299</td>
</tr>
<tr class="odd">
<td style="text-align: left;">ceramica_maiolica</td>
<td style="text-align: right;">1400</td>
<td style="text-align: right;">1899</td>
</tr>
<tr class="even">
<td style="text-align: left;">ceramica_invetriata_eta_moderna</td>
<td style="text-align: right;">1400</td>
<td style="text-align: right;">1899</td>
</tr>
<tr class="odd">
<td style="text-align: left;">pareti_sottili</td>
<td style="text-align: right;">-25</td>
<td style="text-align: right;">150</td>
</tr>
<tr class="even">
<td style="text-align: left;">ceramica_TSI</td>
<td style="text-align: right;">-25</td>
<td style="text-align: right;">99</td>
</tr>
<tr class="odd">
<td style="text-align: left;">ceramica_TSA</td>
<td style="text-align: right;">101</td>
<td style="text-align: right;">650</td>
</tr>
<tr class="even">
<td style="text-align: left;">ceramica_TSA_A</td>
<td style="text-align: right;">175</td>
<td style="text-align: right;">299</td>
</tr>
<tr class="odd">
<td style="text-align: left;">ceramica_TSA_C</td>
<td style="text-align: right;">175</td>
<td style="text-align: right;">499</td>
</tr>
<tr class="even">
<td style="text-align: left;">ceramica_TSA_D</td>
<td style="text-align: right;">300</td>
<td style="text-align: right;">625</td>
</tr>
<tr class="odd">
<td style="text-align: left;">ceramica_eastern_sigillata</td>
<td style="text-align: right;">-25</td>
<td style="text-align: right;">299</td>
</tr>
<tr class="even">
<td style="text-align: left;">ceramica_CAC</td>
<td style="text-align: right;">175</td>
<td style="text-align: right;">325</td>
</tr>
<tr class="odd">
<td style="text-align: left;">ceramica_PRSW</td>
<td style="text-align: right;">400</td>
<td style="text-align: right;">599</td>
</tr>
<tr class="even">
<td style="text-align: left;">ceramica_fuoco</td>
<td style="text-align: right;">-399</td>
<td style="text-align: right;">1799</td>
</tr>
<tr class="odd">
<td style="text-align: left;">ceramica_ICW</td>
<td style="text-align: right;">201</td>
<td style="text-align: right;">299</td>
</tr>
<tr class="even">
<td style="text-align: left;">ceramica_fuoco_invetriata</td>
<td style="text-align: right;">1300</td>
<td style="text-align: right;">1899</td>
</tr>
<tr class="odd">
<td style="text-align: left;">ceramica_lucerna</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">599</td>
</tr>
<tr class="even">
<td style="text-align: left;">ceramica_dolia_GC</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
</tr>
<tr class="odd">
<td style="text-align: left;">ceramica_impasto</td>
<td style="text-align: right;">-6000</td>
<td style="text-align: right;">-600</td>
</tr>
<tr class="even">
<td style="text-align: left;">ceramica_vernice_nera</td>
<td style="text-align: right;">-499</td>
<td style="text-align: right;">-100</td>
</tr>
<tr class="odd">
<td style="text-align: left;">ceramica_amphoras</td>
<td style="text-align: right;">-199</td>
<td style="text-align: right;">599</td>
</tr>
<tr class="even">
<td style="text-align: left;">ceramica_amphoras_italic</td>
<td style="text-align: right;">-199</td>
<td style="text-align: right;">199</td>
</tr>
<tr class="odd">
<td style="text-align: left;">ceramica_amphoras_african</td>
<td style="text-align: right;">200</td>
<td style="text-align: right;">599</td>
</tr>
<tr class="even">
<td style="text-align: left;">ceramica_amphoras_eastern</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">550</td>
</tr>
<tr class="odd">
<td style="text-align: left;">ceramica_geometrica</td>
<td style="text-align: right;">-800</td>
<td style="text-align: right;">-300</td>
</tr>
<tr class="even">
<td style="text-align: left;">ceramica_pasta_grigia</td>
<td style="text-align: right;">-199</td>
<td style="text-align: right;">-1</td>
</tr>
<tr class="odd">
<td style="text-align: left;">ceramica_non_identificata</td>
<td style="text-align: right;">-399</td>
<td style="text-align: right;">1799</td>
</tr>
<tr class="even">
<td style="text-align: left;">pesi_telaio</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
</tr>
<tr class="odd">
<td style="text-align: left;">pesi_pesca</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
</tr>
<tr class="even">
<td style="text-align: left;">intonaco</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
</tr>
<tr class="odd">
<td style="text-align: left;">vetro</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
</tr>
<tr class="even">
<td style="text-align: left;">selce_lavorata</td>
<td style="text-align: right;">-6000</td>
<td style="text-align: right;">-600</td>
</tr>
<tr class="odd">
<td style="text-align: left;">pipa_fittile</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
</tr>
</tbody>
</table>
</div>


</div>
</div>


</section>
</section>

<a onclick="window.scrollTo(0, 0); return false;" role="button" id="quarto-back-to-top"><i class="bi bi-arrow-up"></i> Torna in cima</a></main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copiato!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copiato!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->



</body></html>